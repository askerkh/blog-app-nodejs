<!DOCTYPE html>
<html lang="en">

<%- include('./partials/head.ejs') %>

  <body>
    <%- include('./partials/nav.ejs') %>
      <article class="posts-wrapper">
        <div class="post-grey">
          <div style="display: flex; flex-direction: row; width: 100%; justify-content: space-between;">
            <a style="font-size: 40px; text-decoration: none; color: white;">
              Title:
              <%= post.title %>
            </a>
            <div style="display: flex; gap: 15px;">
              <a style="display: flex; justify-content: center; align-items: center; text-decoration: none; width: 75px; height: 25px; background: black; color: white;"
                href="" data-id="<%= post.id %>">Delete</a>
              <a style="display: flex; justify-content: center; align-items: center; text-decoration: none; width: 75px; height: 25px; background: black; color: white;"
                href="/edit/<%= post.id %>">Edit</a>
            </div>
          </div>
          <p>
            <%= post.text %>
          </p>
          <h4>author: <%= post.author %>
          </h4>
          <h4>date : <%= post.createdAt.toLocaleDateString() %>
          </h4>
        </div>
      </article>
  </body>

  <script>
    document.addEventListener('click', e => {
      const id = e.target?.dataset?.id || null;

      if (id) {
        fetch(`/posts/${id}`, {
          method: 'DELETE',
        }).then(() => window.location.href = '/posts')
      }
    });
  </script>

</html>
